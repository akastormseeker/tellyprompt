<html>
<head>
    <script type="text/javascript" src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"></script>
    <style>
    #logo {
        font-size: 60pt;
        color: #ffffff;
        text-align: center;
        position: absolute;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        background-color: #000000;
        z-index: 10000;
    }
    </style>
    <link rel="stylesheet" type="text/css" href="receiver.css" />
</head>
<body>
    <div id="logo">TellyPrompt</div>

    <div id="screenMarker">
        <svg id="markerHr" height="64" width="100%">
            <line x1="0" y1="32" x2="100%" y2="32" stroke="white" stroke-width="2" />
        </svg>
        <svg id="triLeft" height="64" width="32">
            <path d="M0,0 L32,32 L0,64 Z" fill="white" />
        </svg>
        <svg id="triRight" height="64" width="32">
            <path d="M32,0 L0,32 L32,64 Z" fill="white" />
        </svg>
    </div>
      
    <div id="text"><div id="content" dir="ltr" class="display-font"></div></div>
      
    <div id="topGradient"></div>
    <div id="bottomGradient"></div>
    
    <div id="scrollDisabler"></div>
    
    <script src="jquery-2.2.0.min.js"></script>
    <!-- script src="lib/window_chrome/window_chrome.js"></script -->
    <script src="receiver.js"></script>

    <script>
        var firstConfigReceived = false;
        const context = cast.framework.CastReceiverContext.getInstance();

        const CONTROL_CHANNEL = 'urn:x-cast:akastormseeker.tellyprompt';
        context.addCustomMessageListener(CONTROL_CHANNEL, function(event) {
            console.log("Message Received: ", event);
        });

        context.addEventListener(cast.framework.system.EventType.READY, () => {
            //fadeOutLogo(2000);
        });
        
        function fadeOutLogo(fadeTime) {
            var startTime = Date.now();
            var elem = document.getElementById("logo");
            
            function doFadeStep() {
                var stepTime = Date.now();
                var timeMillis = stepTime - startTime;
                //lastStepTime = stepTime;
                var progress = Math.max(0.0, Math.min(1.0, timeMillis / fadeTime));
                var opacity = 1.0 - progress;
                elem.style.opacity = opacity;
                
                if(progress < 1.0) {
                    setTimeout(doFadeStep, 10);
                }
            }
            
            doFadeStep();
        }

        const options = new cast.framework.CastReceiverOptions();
        options.maxInactivity = 3600; //Development only
        context.start(options);
    </script>
</body>
</html>
